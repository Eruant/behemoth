{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","bundle.js","src/js/main.js","node_modules/browserify/node_modules/events/events.js","node_modules/simple-ajax/index.js","src/js/classes/layout.js","src/js/classes/levels.js","src/js/classes/loop.js","src/js/classes/map.js","src/js/classes/mob.js","src/js/modules/dom.js","src/js/modules/io.js","src/js/modules/loader.js","src/js/modules/render.js","src/js/settings.json"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"_interopRequire","obj","__esModule","_prototypeProperties","child","staticProps","instanceProps","Object","defineProperties","prototype","_classCallCheck","instance","Constructor","TypeError","settings","loop","layout","levels","loader","render","io","Game","this","frameLength","width","height","update","draw","setDimentions","len","levelText","load","setMap","isLoading","onLoaded","start","keyActive","value","currentLevel","maps","currentMap","clearLoader","ctx","writable","configurable","isKeyPressed","triggerGates","updateMobs","drawLoader","progress","drawMap","drawMobs","mobs","./classes/layout","./classes/levels","./classes/loop","./modules/io","./modules/loader","./modules/render","./settings.json",2,"module","EventEmitter","_events","_maxListeners","undefined","isFunction","arg","isNumber","isObject","isUndefined","defaultMaxListeners","setMaxListeners","isNaN","emit","type","er","handler","args","listeners","error","arguments","Array","apply","slice","addListener","listener","m","newListener","push","warned","console","trace","on","once","g","removeListener","fired","list","position","splice","removeAllListeners","key","ret","listenerCount","emitter",3,"tryParseJson","data","JSON","parse","parseQueryString","url","urlParts","split","result","queryStringData","pop","parts","window","unescape","toQueryString","queryString","hasOwnProperty","Ajax","ajax","request","XMLHttpRequest","method","cors","withCredentials","XDomainRequest","cache","_","Date","getTime","toLowerCase","shift","addEventListener","event","target","responseText","dataType","status","open","contentType","setRequestHeader","requestedWith","auth","headerKey","headers","processData","stringify","create","send","events",4,"dom","canvas","createElement","getContext","add","../modules/dom",5,"map","mob","options","name","mobData","x","parseInt","y","direction","color","path","_this","updateMob","nextPosition","getNextPosition","nextMapKey","getKeyForCoordinates","nextMapValue","match","setPosition","rotate","warn","../modules/loader","../settings.json","./map","./mob",6,"_private","scope","frameTime","pause","bind","startTime","timeSinceLastUpdate","tick","stop","isRunning","timestamp","timePassed","delta","requestAnimationFrame",7,"getCoordinatesForKey","Math","floor","coordinates","isKeyValid","isCoordinatesValid","isXValid","isYValid",8,"random","minLength","bodyParts","addBodyPart","part","startPosition","updateBodyParts","setDirection","getDirection","asString","getDirectionAsString","clockwise","lastPart","thisPart",9,"_window","_document","document","callback","onload","element","selector","querySelector","appendChild","eventListener","removeEventListener","setTimeout","delay",10,"bindKeyboard","activeKeys","keyPressed","keyReleased","indexOf","keyCode","left","right","up","down","./dom",11,"loaded","filesLoaded","filesToLoad","onLoadedCallback","message","simple-ajax",12,"scale","tileSize","setScale","tilesX","tilesY","maxTileWidth","maxTileHeight","fillStyle","strokeStyle","save","translate","strokeRect","fillRect","restore","clearRect","mobSize","padding","j","jLen",13],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",null,"/**\n * The main boot file for MAPS\n */\n\nimport settings from './settings.json';\n\nimport loop from './classes/loop';\nimport layout from './classes/layout';\nimport levels from './classes/levels';\n\n//import dom from './modules/dom';\nimport loader from './modules/loader';\nimport render from './modules/render';\nimport io from './modules/io';\n\nclass Game {\n\n    constructor() {\n\n        const frameLength = 1000 / 30;\n\n        // TODO finish this\n        //var mobs = dom.load('mobs') || settings.mobs;\n        //console.log('mobs', mobs);\n\n        this.layout = new layout(settings.width, settings.height);\n        this.loop = new loop(this, frameLength, this.update, this.draw);\n        this.levels = new levels();\n        render.setDimentions(settings.width, settings.height);\n\n        for (let i = 0, len = 4; i < len; i++) {\n\n            let levelText = 'level' + (i + 1);\n\n            this.levels.load(levelText);\n        }\n\n        this.levels.setMap('level4');\n        this.isLoading = true;\n        loader.onLoaded(this, this.start);\n\n        this.keyActive = false;\n        this.loop.start();\n\n    }\n\n    start() {\n\n        this.isLoading = false;\n        this.currentLevel = this.levels.maps[this.levels.currentMap];\n        render.clearLoader(this.layout.ctx);\n    }\n\n    update() {\n\n        if (io.isKeyPressed() && this.keyActive === false) {\n            this.keyActive = true;\n            this.levels.triggerGates(this.currentLevel);\n        } else if (!io.isKeyPressed()) {\n            this.keyActive = false;\n        }\n\n        if (!this.isLoading) {\n            this.levels.updateMobs();\n        }\n\n    }\n\n    draw() {\n\n        if (this.isLoading) {\n            render.drawLoader(this.layout.ctx, loader.progress());\n        } else {\n            render.drawMap(this.layout.ctx, this.currentLevel);\n            render.drawMobs(this.layout.ctx, this.currentLevel.mobs, this.currentLevel);\n        }\n\n    }\n\n}\n\nvar game = new Game();\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      }\n      throw TypeError('Uncaught, unspecified \"error\" event.');\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        len = arguments.length;\n        args = new Array(len - 1);\n        for (i = 1; i < len; i++)\n          args[i - 1] = arguments[i];\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    len = arguments.length;\n    args = new Array(len - 1);\n    for (i = 1; i < len; i++)\n      args[i - 1] = arguments[i];\n\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    var m;\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  var ret;\n  if (!emitter._events || !emitter._events[type])\n    ret = 0;\n  else if (isFunction(emitter._events[type]))\n    ret = 1;\n  else\n    ret = emitter._events[type].length;\n  return ret;\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","var EventEmitter = require('events').EventEmitter;\n\nfunction tryParseJson(data){\n    try{\n        return JSON.parse(data);\n    }catch(error){\n        return error;\n    }\n}\n\nfunction parseQueryString(url){\n    var urlParts = url.split('?'),\n        result = {};\n\n    if(urlParts.length>1){\n\n        var queryStringData = urlParts.pop().split('&');\n\n        for(var i = 0; i < queryStringData.length; i++) {\n            var parts = queryStringData[i].split('='),\n                key = window.unescape(parts[0]),\n                value = window.unescape(parts[1]);\n\n            result[key] = value;\n        }\n    }\n\n    return result;\n}\n\nfunction toQueryString(data){\n    var queryString = '';\n\n    for(var key in data){\n        if(data.hasOwnProperty(key) && data[key] !== undefined){\n            queryString += (queryString.length ? '&' : '?') + key + '=' + data[key];\n        }\n    }\n\n    return queryString;\n}\n\nfunction Ajax(settings){\n    var queryStringData,\n        ajax = this;\n\n    if(typeof settings === 'string'){\n        settings = {\n            url: settings\n        };\n    }\n\n    if(typeof settings !== 'object'){\n        settings = {};\n    }\n\n    ajax.settings = settings;\n    ajax.request = new window.XMLHttpRequest();\n    ajax.settings.method = ajax.settings.method || 'get';\n\n    if(ajax.settings.cors){\n        //http://www.html5rocks.com/en/tutorials/cors/\n        if ('withCredentials' in ajax.request) {\n            ajax.request.withCredentials = true;\n        } else if (typeof XDomainRequest !== 'undefined') {\n            // Otherwise, check if XDomainRequest.\n            // XDomainRequest only exists in IE, and is IE's way of making CORS requests.\n            ajax.request = new window.XDomainRequest();\n        } else {\n            // Otherwise, CORS is not supported by the browser.\n            ajax.emit('error', new Error('Cors is not supported by this browser'));\n        }\n    }\n\n    if(ajax.settings.cache === false){\n        ajax.settings.data = ajax.settings.data || {};\n        ajax.settings.data._ = new Date().getTime();\n    }\n\n    if(ajax.settings.method.toLowerCase() === 'get' && typeof ajax.settings.data === 'object'){\n        queryStringData = parseQueryString(ajax.settings.url);\n        for(var key in ajax.settings.data){\n            if(ajax.settings.data.hasOwnProperty(key)){\n                queryStringData[key] = ajax.settings.data[key];\n            }\n        }\n\n        ajax.settings.url  = ajax.settings.url.split('?').shift() + toQueryString(queryStringData);\n        ajax.settings.data = null;\n    }\n\n    ajax.request.addEventListener('progress', function(event){\n        ajax.emit('progress', event);\n    }, false);\n\n    ajax.request.addEventListener('load', function(event){\n        var data = event.target.responseText;\n\n        if(ajax.settings.dataType && ajax.settings.dataType.toLowerCase() === 'json'){\n            if(data === ''){\n                data = undefined;\n            }else{\n                data = tryParseJson(data);\n                if(data instanceof Error){\n                    ajax.emit('error', event, data);\n                    return;\n                }\n            }\n        }\n\n        if(event.target.status >= 400){\n            ajax.emit('error', event, data);\n        } else {\n            ajax.emit('success', event, data);\n        }\n\n    }, false);\n\n    ajax.request.addEventListener('error', function(event){\n        ajax.emit('error', event);\n    }, false);\n\n    ajax.request.addEventListener('abort', function(event){\n        ajax.emit('abort', event);\n    }, false);\n\n    ajax.request.addEventListener('loadend', function(event){\n        ajax.emit('complete', event);\n    }, false);\n\n    ajax.request.open(ajax.settings.method || 'get', ajax.settings.url, true);\n\n    // Set default headers\n    if(ajax.settings.contentType !== false){\n        ajax.request.setRequestHeader('Content-Type', ajax.settings.contentType || 'application/json; charset=utf-8');\n    }\n    ajax.request.setRequestHeader('X-Requested-With', ajax.settings.requestedWith || 'XMLHttpRequest');\n    if(ajax.settings.auth){\n        ajax.request.setRequestHeader('Authorization', ajax.settings.auth);\n    }\n\n    // Set custom headers\n    for(var headerKey in ajax.settings.headers){\n        ajax.request.setRequestHeader(headerKey, ajax.settings.headers[headerKey]);\n    }\n\n    if(ajax.settings.processData !== false && ajax.settings.dataType === 'json'){\n        ajax.settings.data = JSON.stringify(ajax.settings.data);\n    }\n}\n\nAjax.prototype = Object.create(EventEmitter.prototype);\nAjax.prototype.send = function(){\n    this.request.send(this.settings.data && this.settings.data);\n};\n\nmodule.exports = Ajax;","import dom from '../modules/dom';\n\nclass layout {\n\n    constructor(width = 600, height = 400) {\n\n        var canvas = dom.createElement('canvas'),\n            ctx = canvas.getContext('2d');\n\n        canvas.width = width;\n        canvas.height = height;\n\n        dom.load(function () {\n            dom.add(canvas, 'body');\n        });\n\n        return {\n            canvas: canvas,\n            ctx: ctx\n        };\n    }\n}\n\nexport default layout;\n","import map from './map';\nimport loader from '../modules/loader';\nimport mob from './mob';\nimport settings from '../settings.json';\n\nclass levels {\n\n    constructor() {\n\n        this.maps = {};\n        this.currentMap = null;\n    }\n\n    add(options) {\n\n        this.maps[options.name] = new map(options);\n\n        // TODO remove this an trigger from localstorage\n        this.maps[options.name].mobs = [];\n        for (let i = 0, len = options.mobs.length; i < len; i++) {\n\n            let mobData = options.mobs[i];\n\n            let position = {\n                x: parseInt(mobData.position.x, 10),\n                y: parseInt(mobData.position.y, 10)\n            };\n\n            let direction = {\n                x: parseInt(mobData.direction.x, 10),\n                y: parseInt(mobData.direction.y, 10)\n            };\n\n            let color = 0;\n\n            if (mobData.color) {\n                color = parseInt(mobData.color);\n            } else {\n                color = settings.mobs[i].color;\n            }\n\n            this.maps[options.name].mobs.push(new mob(position, direction, color));\n        }\n    }\n\n    setMap(name) {\n        this.currentMap = name;\n    }\n\n    load(path) {\n\n        var url = './data/levels/' + path + '.json';\n\n        loader.load(url, (type, data) => {\n            if (type === 'success') {\n\n                var map = JSON.parse(data);\n\n                this.add(map);\n            }\n        });\n    }\n\n    triggerGates(map) {\n\n        for (let i = 0, len = map.data.length; i < len; i++) {\n\n            switch (map.data[i]) {\n                case 'o':\n                    map.data[i] = 'c';\n                    break;\n                case 'c':\n                    map.data[i] = 'o';\n                    break;\n            }\n        }\n    }\n\n    updateMobs() {\n\n        for (let i = 0, len = this.maps[this.currentMap].mobs.length; i < len; i++) {\n            this.updateMob(this.maps[this.currentMap].mobs[i]);\n        }\n    }\n\n    updateMob(mob) {\n\n        var map = this.maps[this.currentMap],\n            nextPosition = mob.getNextPosition(),\n            nextMapKey = map.getKeyForCoordinates(nextPosition),\n            nextMapValue = map.data[nextMapKey],\n            startPosition = mob.position;\n\n        if (nextMapValue.match(/[\\.o]/)) {\n            mob.setPosition(nextPosition);\n        } else {\n            mob.rotate();\n            nextPosition = mob.getNextPosition();\n            nextMapKey = map.getKeyForCoordinates(nextPosition);\n            nextMapValue = map.data[nextMapKey];\n\n            if (nextMapValue.match(/[\\.o]/)) {\n                mob.setPosition(nextPosition);\n            } else {\n                mob.rotate();\n                mob.rotate();\n                nextPosition = mob.getNextPosition();\n                nextMapKey = map.getKeyForCoordinates(nextPosition);\n                nextMapValue = map.data[nextMapKey];\n\n                if (nextMapValue.match(/[\\.o]/)) {\n                    mob.setPosition(nextPosition);\n                } else {\n                    console.warn('mob stuck');\n                }\n            }\n        }\n\n    }\n\n}\n\nexport default levels;\n","import dom from '../modules/dom';\n\nvar _private = {};\n\nclass loop {\n\n    constructor(scope = this, frameTime = (1000 / 60), update = null, draw = null) {\n        _private.frameTime = frameTime;\n        _private.pause = true;\n        _private.update = update.bind(scope);\n        _private.draw = draw.bind(scope);\n    }\n\n    start() {\n        _private.pause = false;\n        _private.startTime = new Date().getTime();\n        _private.timeSinceLastUpdate = 0;\n\n        this.tick(0);\n    }\n\n    stop() {\n        _private.pause = true;\n    }\n\n    isRunning() {\n        return _private.pause;\n    }\n\n    tick(timestamp) {\n\n        if (_private.pause) {\n            return;\n        }\n\n        var timePassed = new Date().getTime() - _private.startTime,\n            delta = timestamp - timePassed;\n\n        _private.timeSinceLastUpdate += delta;\n\n        if (_private.timeSinceLastUpdate > _private.frameTime) {\n            if (_private.update !== null) {\n                _private.update();\n            }\n            _private.timeSinceLastUpdate = 0;\n        }\n\n        if (_private.draw !== null) {\n            _private.draw();\n        }\n\n        dom.requestAnimationFrame(this.tick, this);\n    }\n\n}\n\nexport default loop;\n","class map {\n\n    constructor(options) {\n\n        this.width = options.width;\n        this.height = options.height;\n        this.data = options.data;\n    }\n\n    getCoordinatesForKey(key) {\n\n        return {\n            x: (key === 0) ? 0 : Math.floor(key / this.width),\n            y: (key === 0) ? 0 : key % this.width\n        };\n    }\n\n    getKeyForCoordinates(coordinates) {\n        return (coordinates.y * this.width) + coordinates.x;\n    }\n\n    isKeyValid(key) {\n        return (key > 0) && (key <= this.data.length);\n    }\n\n    isCoordinatesValid(coordinates) {\n\n        var isXValid = (coordinates.x >= 0 && coordinates.x < this.width),\n            isYValid = (coordinates.y >= 0 && coordinates.y < this.height);\n\n        return isXValid && isYValid;\n    }\n\n}\n\nexport default map;\n","\nclass mob {\n\n    constructor(position, direction, color = Math.floor(Math.random(360))) {\n\n        this.length = 5;\n        this.minLength = 3;\n\n        this.color = color;\n\n        this.position = {\n            x: position.x || 0,\n            y: position.y || 0\n        };\n\n        this.direction = {\n            x: direction.x || 0,\n            y: direction.y || 0\n        };\n\n        this.bodyParts = [];\n\n        for (let i = 0, len = this.length -1; i < len; i++) {\n            this.addBodyPart();\n        }\n\n    }\n\n    addBodyPart() {\n\n        var position;\n\n        if (this.bodyParts.length === 0) {\n            position = {\n                x: this.position.x,\n                y: this.position.y\n            };\n        } else {\n            let part = this.bodyParts[this.bodyParts.length - 1];\n\n            position = {\n                x: part.x,\n                y: part.y\n            };\n        }\n\n        this.bodyParts.push(position);\n    }\n\n    setPosition(position) {\n\n        var startPosition = {\n            x: this.position.x,\n            y: this.position.y\n        };\n\n        this.position.x = position.x;\n        this.position.y = position.y;\n\n        this.updateBodyParts(startPosition);\n    }\n\n    setDirection(direction) {\n\n        if (typeof direction === 'object') {\n            this.direction.x = direction.x;\n            this.direction.y = direction.y;\n        } else if (typeof direction === 'string') {\n\n            let x = 0,\n                y = 0;\n\n            switch (direction) {\n                case 'right':\n                    x = 1;\n                    y = 0;\n                    break;\n                case 'left':\n                    x = -1;\n                    y = 0;\n                    break;\n                case 'up':\n                    x = 0;\n                    y = -1;\n                    break;\n                case 'down':\n                    x = 0;\n                    y = 1;\n                    break;\n            }\n\n            this.direction.x = x;\n            this.direction.y = y;\n        }\n    }\n\n    getDirection(asString = false) {\n\n        if (asString) {\n            return this.getDirectionAsString();\n        } else {\n            return this.direction;\n        }\n    }\n\n    getDirectionAsString() {\n\n        var direction;\n\n        if (this.direction.x === 1) {\n            direction = 'right';\n        } else if (this.direction.x === -1) {\n            direction = 'left';\n        } else if (this.direction.y === 1) {\n            direction = 'down';\n        } else if (this.direction.y === -1) {\n            direction = 'up';\n        }\n\n        return direction;\n    }\n\n    rotate(clockwise = true) {\n\n        if (clockwise) {\n            switch (this.getDirection(true)) {\n                case 'left':\n                    this.setDirection('up');\n                    break;\n                case 'right':\n                    this.setDirection('down');\n                    break;\n                case 'up':\n                    this.setDirection('right');\n                    break;\n                case 'down':\n                    this.setDirection('left');\n                    break;\n            }\n        } else {\n            this.rotate();\n            this.rotate();\n            this.rotate();\n        }\n\n    }\n\n    getNextPosition() {\n\n        return {\n            x: this.position.x + this.direction.x,\n            y: this.position.y + this.direction.y\n        };\n    }\n\n    updateBodyParts(position) {\n\n        var lastPart = {\n            x: position.x,\n            y: position.y\n        };\n\n        for (let i = 0, len = this.bodyParts.length; i < len; i++) {\n\n            let part = this.bodyParts[i];\n\n            if (part.x !== lastPart.x || part.y !== lastPart.y) {\n\n                let thisPart = {\n                    x: this.bodyParts[i].x,\n                    y: this.bodyParts[i].y\n                };\n\n                this.bodyParts[i].x = lastPart.x;\n                this.bodyParts[i].y = lastPart.y;\n\n                lastPart.x = thisPart.x;\n                lastPart.y = thisPart.y;\n\n            }\n        }\n\n        //console.log('parts [x:%d y: %d] [x:%d, y:%d]',\n            //this.bodyParts[0].x,\n            //this.bodyParts[0].y,\n            //this.bodyParts[1].x,\n            //this.bodyParts[1].y\n        //);\n\n    }\n\n}\n\nexport default mob;\n","var _window = window,\n    _document = _window.document,\n    dom = {};\n\ndom.createElement = function (type) {\n    return _document.createElement(type);\n};\n\ndom.load = function (callback) {\n    _window.onload = callback;\n};\n\ndom.add = function (element, selector) {\n    _document.querySelector(selector).appendChild(element);\n};\n\ndom.requestAnimationFrame = function (callback, scope) {\n    _window.requestAnimationFrame(callback.bind(scope));\n};\n\ndom.eventListener = function (scope, add, type, callback) {\n    if (add === true) {\n        _window.addEventListener(type, callback.bind(scope), false);\n    } else {\n        _window.removeEventListener(type);\n    }\n};\n\ndom.setTimeout = function (callback, delay) {\n    _window.setTimeout(() => {\n        callback();\n    }, delay);\n};\n\n//dom.save = function (key, value) {\n    //_window.localStorage.setItem(key, value);\n//};\n\n//dom.load = function (key) {\n    //let item = _window.localStorage.getItem(key);\n\n    //return JSON.parse(item);\n//};\n\nexport default dom;\n","import dom from './dom';\n\nclass io {\n\n    constructor() {\n        this.bindKeyboard();\n        this.activeKeys = [];\n    }\n\n    bindKeyboard() {\n        dom.eventListener(this, true, 'keydown', this.keyPressed);\n        dom.eventListener(this, true, 'keyup', this.keyReleased);\n    }\n\n    keyPressed(event) {\n\n        if (this.activeKeys.indexOf(event.keyCode) === -1) {\n            this.activeKeys.push(event.keyCode);\n        }\n\n    }\n\n    keyReleased(event) {\n\n        var i = this.activeKeys.indexOf(event.keyCode);\n\n        if (i !== -1) {\n            this.activeKeys.splice(i, 1);\n        }\n    }\n\n    getDirection() {\n\n        var left = (this.activeKeys.indexOf(37) !== -1) ? -1 : 0,\n            right = (this.activeKeys.indexOf(39) !== -1) ? 1 : 0,\n            up = (this.activeKeys.indexOf(38) !== -1) ? -1 : 0,\n            down = (this.activeKeys.indexOf(40) !== -1) ? 1 : 0;\n\n        return {\n            x: left + right,\n            y: up + down\n        };\n    }\n\n    isKeyPressed() {\n        return (this.activeKeys.length > 0);\n    }\n\n}\n\nexport default new io();\n","import ajax from 'simple-ajax';\nimport dom from './dom';\n\nclass loader {\n\n    constructor() {\n\n        this.loaded = false;\n        this.filesLoaded = 0;\n        this.filesToLoad = 0;\n        this.onLoadedCallback = null;\n    }\n\n    progress() {\n\n        if (this.filesToLoad === 0) {\n            this.loaded = true;\n            return 1;\n        } else if (this.filesLoaded === 0) {\n            return 0;\n        } else {\n            return this.filesLoaded / this.filesToLoad;\n        }\n\n    }\n\n    load(path, callback) {\n\n        this.loaded = false;\n        this.filesToLoad++;\n\n        new ajax(path)\n            .on('success', (event, data) => {\n                callback('success', data);\n            })\n            .on('error', (event, message) => {\n                callback('error', message);\n            })\n            .on('complete', () => {\n                this.filesLoaded++;\n\n                if (this.progress() === 1 && this.onLoadedCallback) {\n                    this.onLoadedCallback();\n                }\n            })\n            .send();\n    }\n\n    onLoaded(scope, callback) {\n        this.onLoadedCallback = callback.bind(scope);\n    }\n\n}\n\nexport default new loader();\n","class render {\n\n    constructor() {\n\n        this.scale = [1, 1];\n    }\n\n    setDimentions(width, height) {\n        this.width = width;\n        this.height = height;\n        this.tileSize = 32;\n    }\n\n    setScale(tilesX, tilesY) {\n\n        var maxTileWidth = this.width / tilesX,\n            maxTileHeight = this.height / tilesY;\n\n        this.tileSize = (maxTileWidth > maxTileHeight) ? maxTileHeight : maxTileWidth;\n\n    }\n\n    drawLoader(ctx, progress) {\n\n        this.clearLoader(ctx);\n\n        ctx.fillStyle = 'hsl(270, 50%, 60%)';\n        ctx.strokeStyle = 'hsl(270, 50%, 60%)';\n        ctx.save();\n        ctx.translate(this.width * 0.5, this.height * 0.5);\n        ctx.strokeRect(-50, -5, 100, 10);\n        ctx.fillRect(-50, -5, Math.floor(progress * 100), 10);\n        ctx.restore();\n\n    }\n\n    clearLoader(ctx) {\n\n        ctx.save();\n        ctx.translate(this.width * 0.5, this.height * 0.5);\n        ctx.clearRect(-51, -6, 102, 12);\n        ctx.restore();\n    }\n\n    drawMap(ctx, map) {\n\n        this.setScale(map.width, map.height);\n\n        var x = 0,\n            y = 0;\n\n        for (let i = 0, len = map.data.length; i < len; i++) {\n\n            switch (map.data[i]) {\n                case 'X':\n                      ctx.fillStyle = 'hsl(100, 50%, 60%)';\n                      break;\n                case 'c':\n                      ctx.fillStyle = 'hsl(30, 50%, 80%)';\n                      break;\n                case 'o':\n                      ctx.fillStyle = 'hsl(30, 50%, 60%)';\n                      break;\n                default:\n                      ctx.fillStyle = 'hsl(30, 50%, 60%)';\n            }\n\n            ctx.fillRect(x, y, this.tileSize - 1, this.tileSize - 1);\n\n            if (i % map.width === map.width - 1) {\n                x = 0;\n                y += this.tileSize;\n            } else {\n                x += this.tileSize;\n            }\n        }\n\n    }\n\n    drawMobs(ctx, mobs, map) {\n\n        this.setScale(map.width, map.height);\n\n        var mobSize = this.tileSize * 0.7,\n            padding = (this.tileSize - mobSize) * 0.5;\n\n        // draw each mob\n        for (let i = 0, len = mobs.length; i < len; i++) {\n\n            let mob = mobs[i];\n\n            // draw head\n            ctx.save();\n            ctx.translate(mob.position.x * this.tileSize, mob.position.y * this.tileSize);\n            ctx.fillStyle = 'hsl(' + mob.color + ', 50%, 60%)';\n            ctx.fillRect(padding, padding, mobSize, mobSize);\n            ctx.restore();\n\n            // draw each body part\n            for (let j = 0, jLen = mob.bodyParts.length; j < jLen; j++) {\n\n                let part = mob.bodyParts[j];\n\n                ctx.save();\n                ctx.translate(part.x * this.tileSize, part.y * this.tileSize);\n                if (j + 1 === jLen) {\n                    ctx.fillStyle = 'hsl(' + (mob.color + 40) + ', 50%, 60%)';\n                } else {\n                    ctx.fillStyle = 'hsl(' + (mob.color + 20) + ', 50%, 60%)';\n                }\n                ctx.fillRect(padding, padding, mobSize, mobSize);\n                ctx.restore();\n\n            }\n\n        }\n\n\n    }\n}\n\nexport default new render();\n","module.exports={\n    \"width\": \"800\",\n    \"height\": \"600\",\n    \"mobs\": [\n        {\n            \"name\": \"mob-1\",\n            \"color\": \"200\"\n        },\n        {\n            \"name\": \"mob-2\",\n            \"color\": \"100\"\n        }\n    ]\n}\n"],"sourceRoot":"/source/"}