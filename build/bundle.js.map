{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","bundle.js","src/js/main.js","node_modules/browserify/node_modules/events/events.js","node_modules/simple-ajax/index.js","src/js/classes/layout.js","src/js/classes/levels.js","src/js/classes/loop.js","src/js/classes/map.js","src/js/classes/mob.js","src/js/modules/dom.js","src/js/modules/io.js","src/js/modules/loader.js","src/js/modules/render.js","src/js/settings.json"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"_interopRequire","obj","__esModule","_prototypeProperties","child","staticProps","instanceProps","Object","defineProperties","prototype","_classCallCheck","instance","Constructor","TypeError","settings","loop","layout","levels","dom","loader","render","io","Game","this","FRAME_LENGTH","mobs","loadStorage","saveStorage","state","winner","width","height","update","draw","setDimentions","len","levelText","load","setMap","isLoading","onLoaded","start","keyActive","countdown","current","interval","timePassed","instructions","value","setStyles","currentLevel","maps","currentMap","clearLoader","ctx","writable","configurable","isKeyPressed","triggerGates","finished","updateMobs","stop","setTimeout","reload","clearRect","drawLoader","progress","drawInstructions","offset","x","y","tileSize","save","translate","drawMap","drawMobs","restore","drawCountdown","drawEnd","./classes/layout","./classes/levels","./classes/loop","./modules/dom","./modules/io","./modules/loader","./modules/render","./settings.json",2,"module","EventEmitter","_events","_maxListeners","undefined","isFunction","arg","isNumber","isObject","isUndefined","defaultMaxListeners","setMaxListeners","isNaN","emit","type","er","handler","args","listeners","error","arguments","Array","apply","slice","addListener","listener","m","newListener","push","warned","console","trace","on","once","g","removeListener","fired","list","position","splice","removeAllListeners","key","ret","listenerCount","emitter",3,"tryParseJson","data","JSON","parse","parseQueryString","url","urlParts","split","result","queryStringData","pop","parts","window","unescape","toQueryString","queryString","hasOwnProperty","Ajax","ajax","request","XMLHttpRequest","method","cors","withCredentials","XDomainRequest","cache","_","Date","getTime","toLowerCase","shift","addEventListener","event","target","responseText","dataType","status","open","contentType","setRequestHeader","requestedWith","auth","headerKey","headers","processData","stringify","create","send","events",4,"canvas","createElement","getContext","add","../modules/dom",5,"map","mob","options","mobSettings","name","_name","mobData","parseInt","direction","color","path","_this","loadAjax","updateMob","checkCollisions","nextPosition","getNextPosition","nextMapKey","getKeyForCoordinates","nextMapValue","match","setPosition","rotate","warn","occupiedSlots","deadMobs","_mob","j","jLen","bodyParts","part","slot","_mob2","targetMob","addBodyPart","minLength","sort","b","../modules/loader","./map","./mob",6,"_private","scope","frameTime","pause","bind","startTime","timeSinceLastUpdate","tick","isRunning","timestamp","delta","requestAnimationFrame",7,"getCoordinatesForKey","Math","floor","coordinates","isKeyValid","isCoordinatesValid","isXValid","isYValid",8,"random","rotation","startPosition","updateBodyParts","setDirection","pi180","PI","getDirection","asString","getDirectionAsString","clockwise","lastPart","thisPart",9,"_window","_document","document","callback","onload","element","selector","querySelector","appendChild","eventListener","removeEventListener","delay","localStorage","setItem","item","getItem","body","style","backgroundColor","textAlign","location",10,"bindKeyboard","activeKeys","keyPressed","keyReleased","indexOf","keyCode","left","right","up","down","./dom",11,"loaded","filesLoaded","filesToLoad","onLoadedCallback","message","loadImg","img","Image","src","simple-ajax",12,"scale","tileset","setScale","tilesX","tilesY","maxTileWidth","maxTileHeight","drawTile","size","sx","sy","sw","sh","dx","dy","dw","dh","drawImage","fillStyle","strokeStyle","strokeRect","fillRect","mobSize","padding","lastX","lastY","last","addColorValue","original","difference","newValue","number","font","fillText","../settings.json","./loader",13],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",null,"/**\n * The main boot file for MAPS\n */\n\nimport settings from './settings.json';\n\nimport loop from './classes/loop';\nimport layout from './classes/layout';\nimport levels from './classes/levels';\n\nimport dom from './modules/dom';\nimport loader from './modules/loader';\nimport render from './modules/render';\nimport io from './modules/io';\n\nclass Game {\n\n    constructor() {\n\n        const FRAME_LENGTH = 1000 / 3;\n\n        var mobs = dom.loadStorage('mobs');\n\n        if (!mobs) {\n            mobs = settings.mobs;\n            dom.saveStorage('mobs', mobs);\n        }\n\n        this.state = 'loading';\n        this.winner = false;\n\n        this.layout = new layout(settings.width, settings.height);\n        this.loop = new loop(this, FRAME_LENGTH, this.update, this.draw);\n        this.levels = new levels();\n        render.setDimentions(settings.width, settings.height);\n\n        for (let i = 0, len = 4; i < len; i++) {\n\n            let levelText = 'level' + (i + 1);\n\n            this.levels.load(levelText);\n        }\n\n        this.levels.setMap('level4');\n        this.isLoading = true;\n        loader.onLoaded(this, this.start);\n\n        this.keyActive = false;\n        this.countdown = {\n          current: 3,\n          interval: 1000,\n          timePassed: 0\n        };\n\n        this.instructions = {\n            current: 5,\n            interval: 1000,\n            timePassed: 0\n        };\n        this.loop.start();\n\n    }\n\n    start() {\n\n        dom.setStyles();\n\n        this.isLoading = false;\n        this.currentLevel = this.levels.maps[this.levels.currentMap];\n        render.clearLoader(this.layout.ctx);\n    }\n\n    update(t) {\n\n        if (io.isKeyPressed() && this.keyActive === false) {\n            this.keyActive = true;\n            this.levels.triggerGates(this.currentLevel);\n        } else if (!io.isKeyPressed()) {\n            this.keyActive = false;\n        }\n\n        if (!this.isLoading) {\n\n            switch(this.state) {\n\n                case 'loading':\n\n                    if (!this.isLoading) {\n                        this.state = 'instructions';\n                    }\n                    break;\n\n                case 'instructions':\n\n                    if (this.instructions.current > 0) {\n\n                        this.instructions.timePassed += t;\n\n                        if (this.instructions.timePassed > this.instructions.interval) {\n                            this.instructions.current--;\n                            this.instructions.timePassed -= this.instructions.interval;\n                        }\n                    } else {\n                        this.state = 'countdown';\n                    }\n\n                    break;\n\n                case 'countdown':\n\n                    if (this.countdown.current > 0) {\n\n                        this.countdown.timePassed += t;\n\n                        if (this.countdown.timePassed > this.countdown.interval) {\n                            this.countdown.current--;\n                            this.countdown.timePassed -= this.countdown.interval;\n                        }\n\n                    } else {\n                        this.state = 'game';\n                    }\n                    break;\n\n                case 'game':\n\n                    let finished = this.levels.updateMobs();\n\n                    if (finished) {\n                        this.winner = finished;\n                        this.state = 'end';\n                    }\n\n                    break;\n\n                case 'end':\n\n                    this.loop.stop();\n                    dom.setTimeout(() => {\n                        dom.reload();\n                    }, 5000);\n\n                    break;\n\n            }\n        }\n\n    }\n\n    draw() {\n\n        this.layout.ctx.clearRect(0, 0, settings.width, settings.height);\n\n        switch (this.state) {\n\n            case 'loading':\n\n                render.drawLoader(this.layout.ctx, loader.progress());\n\n                break;\n\n            case 'instructions':\n\n                render.drawInstructions(this.layout.ctx);\n\n                break;\n\n            case 'countdown':\n            case 'game':\n\n                let offset = {\n                    x: 0,\n                    y: 0\n                };\n\n                if (this.currentLevel.width * render.tileSize < render.width) {\n                    offset.x = (render.width - (this.currentLevel.width * render.tileSize)) * 0.5;\n                } else {\n                    offset.y = (render.height - (this.currentLevel.height * render.tileSize)) * 0.5;\n                }\n\n                this.layout.ctx.save();\n                this.layout.ctx.translate(offset.x, offset.y);\n\n                render.drawMap(this.layout.ctx, this.currentLevel);\n                render.drawMobs(this.layout.ctx, this.currentLevel.mobs, this.currentLevel);\n\n                this.layout.ctx.restore();\n\n                if (this.countdown.current > 0) {\n                    render.drawCountdown(this.layout.ctx, this.countdown.current);\n                }\n\n                break;\n\n            case 'end':\n\n                render.drawEnd(this.layout.ctx, this.winner);\n\n                break;\n\n        }\n\n    }\n\n}\n\nvar game = new Game();\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      }\n      throw TypeError('Uncaught, unspecified \"error\" event.');\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        len = arguments.length;\n        args = new Array(len - 1);\n        for (i = 1; i < len; i++)\n          args[i - 1] = arguments[i];\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    len = arguments.length;\n    args = new Array(len - 1);\n    for (i = 1; i < len; i++)\n      args[i - 1] = arguments[i];\n\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    var m;\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  var ret;\n  if (!emitter._events || !emitter._events[type])\n    ret = 0;\n  else if (isFunction(emitter._events[type]))\n    ret = 1;\n  else\n    ret = emitter._events[type].length;\n  return ret;\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","var EventEmitter = require('events').EventEmitter;\n\nfunction tryParseJson(data){\n    try{\n        return JSON.parse(data);\n    }catch(error){\n        return error;\n    }\n}\n\nfunction parseQueryString(url){\n    var urlParts = url.split('?'),\n        result = {};\n\n    if(urlParts.length>1){\n\n        var queryStringData = urlParts.pop().split('&');\n\n        for(var i = 0; i < queryStringData.length; i++) {\n            var parts = queryStringData[i].split('='),\n                key = window.unescape(parts[0]),\n                value = window.unescape(parts[1]);\n\n            result[key] = value;\n        }\n    }\n\n    return result;\n}\n\nfunction toQueryString(data){\n    var queryString = '';\n\n    for(var key in data){\n        if(data.hasOwnProperty(key) && data[key] !== undefined){\n            queryString += (queryString.length ? '&' : '?') + key + '=' + data[key];\n        }\n    }\n\n    return queryString;\n}\n\nfunction Ajax(settings){\n    var queryStringData,\n        ajax = this;\n\n    if(typeof settings === 'string'){\n        settings = {\n            url: settings\n        };\n    }\n\n    if(typeof settings !== 'object'){\n        settings = {};\n    }\n\n    ajax.settings = settings;\n    ajax.request = new window.XMLHttpRequest();\n    ajax.settings.method = ajax.settings.method || 'get';\n\n    if(ajax.settings.cors){\n        //http://www.html5rocks.com/en/tutorials/cors/\n        if ('withCredentials' in ajax.request) {\n            ajax.request.withCredentials = true;\n        } else if (typeof XDomainRequest !== 'undefined') {\n            // Otherwise, check if XDomainRequest.\n            // XDomainRequest only exists in IE, and is IE's way of making CORS requests.\n            ajax.request = new window.XDomainRequest();\n        } else {\n            // Otherwise, CORS is not supported by the browser.\n            ajax.emit('error', new Error('Cors is not supported by this browser'));\n        }\n    }\n\n    if(ajax.settings.cache === false){\n        ajax.settings.data = ajax.settings.data || {};\n        ajax.settings.data._ = new Date().getTime();\n    }\n\n    if(ajax.settings.method.toLowerCase() === 'get' && typeof ajax.settings.data === 'object'){\n        queryStringData = parseQueryString(ajax.settings.url);\n        for(var key in ajax.settings.data){\n            if(ajax.settings.data.hasOwnProperty(key)){\n                queryStringData[key] = ajax.settings.data[key];\n            }\n        }\n\n        ajax.settings.url  = ajax.settings.url.split('?').shift() + toQueryString(queryStringData);\n        ajax.settings.data = null;\n    }\n\n    ajax.request.addEventListener('progress', function(event){\n        ajax.emit('progress', event);\n    }, false);\n\n    ajax.request.addEventListener('load', function(event){\n        var data = event.target.responseText;\n\n        if(ajax.settings.dataType && ajax.settings.dataType.toLowerCase() === 'json'){\n            if(data === ''){\n                data = undefined;\n            }else{\n                data = tryParseJson(data);\n                if(data instanceof Error){\n                    ajax.emit('error', event, data);\n                    return;\n                }\n            }\n        }\n\n        if(event.target.status >= 400){\n            ajax.emit('error', event, data);\n        } else {\n            ajax.emit('success', event, data);\n        }\n\n    }, false);\n\n    ajax.request.addEventListener('error', function(event){\n        ajax.emit('error', event);\n    }, false);\n\n    ajax.request.addEventListener('abort', function(event){\n        ajax.emit('abort', event);\n    }, false);\n\n    ajax.request.addEventListener('loadend', function(event){\n        ajax.emit('complete', event);\n    }, false);\n\n    ajax.request.open(ajax.settings.method || 'get', ajax.settings.url, true);\n\n    // Set default headers\n    if(ajax.settings.contentType !== false){\n        ajax.request.setRequestHeader('Content-Type', ajax.settings.contentType || 'application/json; charset=utf-8');\n    }\n    ajax.request.setRequestHeader('X-Requested-With', ajax.settings.requestedWith || 'XMLHttpRequest');\n    if(ajax.settings.auth){\n        ajax.request.setRequestHeader('Authorization', ajax.settings.auth);\n    }\n\n    // Set custom headers\n    for(var headerKey in ajax.settings.headers){\n        ajax.request.setRequestHeader(headerKey, ajax.settings.headers[headerKey]);\n    }\n\n    if(ajax.settings.processData !== false && ajax.settings.dataType === 'json'){\n        ajax.settings.data = JSON.stringify(ajax.settings.data);\n    }\n}\n\nAjax.prototype = Object.create(EventEmitter.prototype);\nAjax.prototype.send = function(){\n    this.request.send(this.settings.data && this.settings.data);\n};\n\nmodule.exports = Ajax;","import dom from '../modules/dom';\n\nclass layout {\n\n    constructor(width = 600, height = 400) {\n\n        var canvas = dom.createElement('canvas'),\n            ctx = canvas.getContext('2d');\n\n        canvas.width = width;\n        canvas.height = height;\n\n        // render on pixels (not inbetween)\n        ctx.translate(-0.5, -0.5);\n\n        dom.load(function () {\n            dom.add(canvas, 'body');\n        });\n\n        return {\n            canvas: canvas,\n            ctx: ctx\n        };\n    }\n}\n\nexport default layout;\n","import map from './map';\nimport loader from '../modules/loader';\nimport mob from './mob';\nimport dom from '../modules/dom';\n\nclass levels {\n\n    constructor() {\n\n        this.maps = {};\n        this.currentMap = null;\n\n        this.finished = false;\n    }\n\n    add(options) {\n\n        var mobSettings = dom.loadStorage('mobs');\n\n        this.maps[options.name] = new map(options);\n\n        this.maps[options.name].mobs = [];\n        for (let i = 0, len = options.mobs.length; i < len; i++) {\n\n            let name = mobSettings[i].name;\n\n            let mobData = options.mobs[i];\n\n            let position = {\n                x: parseInt(mobData.position.x, 10),\n                y: parseInt(mobData.position.y, 10)\n            };\n\n            let direction = {\n                x: parseInt(mobData.direction.x, 10),\n                y: parseInt(mobData.direction.y, 10)\n            };\n\n            let color = parseInt(mobSettings[i].color, 10);\n\n            this.maps[options.name].mobs.push(new mob(name, position, direction, color));\n        }\n    }\n\n    setMap(name) {\n        this.currentMap = name;\n    }\n\n    load(path) {\n\n        var url = './data/levels/' + path + '.json';\n\n        loader.loadAjax(url, (type, data) => {\n            if (type === 'success') {\n\n                var map = JSON.parse(data);\n\n                this.add(map);\n            }\n        });\n    }\n\n    triggerGates(map) {\n\n        for (let i = 0, len = map.data.length; i < len; i++) {\n\n            switch (map.data[i]) {\n                case 'o':\n                    map.data[i] = 'c';\n                    break;\n                case 'c':\n                    map.data[i] = 'o';\n                    break;\n            }\n        }\n    }\n\n    updateMobs() {\n\n        for (let i = 0, len = this.maps[this.currentMap].mobs.length; i < len; i++) {\n            this.updateMob(this.maps[this.currentMap].mobs[i]);\n        }\n\n        this.checkCollisions();\n\n        return this.finished;\n\n    }\n\n    updateMob(mob) {\n\n        var map = this.maps[this.currentMap],\n            nextPosition = mob.getNextPosition(),\n            nextMapKey = map.getKeyForCoordinates(nextPosition),\n            nextMapValue = map.data[nextMapKey],\n            startPosition = mob.position;\n\n        if (nextMapValue.match(/[\\.o]/)) {\n            mob.setPosition(nextPosition);\n        } else {\n            mob.rotate();\n            nextPosition = mob.getNextPosition();\n            nextMapKey = map.getKeyForCoordinates(nextPosition);\n            nextMapValue = map.data[nextMapKey];\n\n            if (nextMapValue.match(/[\\.o]/)) {\n                mob.setPosition(nextPosition);\n            } else {\n                mob.rotate();\n                mob.rotate();\n                nextPosition = mob.getNextPosition();\n                nextMapKey = map.getKeyForCoordinates(nextPosition);\n                nextMapValue = map.data[nextMapKey];\n\n                if (nextMapValue.match(/[\\.o]/)) {\n                    mob.setPosition(nextPosition);\n                } else {\n                    console.warn('mob stuck');\n                }\n            }\n        }\n\n    }\n\n    checkCollisions() {\n\n        var occupiedSlots = [],\n            mobs = this.maps[this.currentMap].mobs,\n            deadMobs = [];\n\n        for (let i = 0, len = mobs.length; i < len; i++) {\n\n            let mob = mobs[i];\n\n            for (let j = 0, jLen = mob.bodyParts.length; j < jLen; j++) {\n                occupiedSlots.push({\n                    mob: i,\n                    part: j,\n                    position: mob.bodyParts[j]\n                });\n            }\n\n        }\n\n        for (let i = 0, len = occupiedSlots.length; i < len; i++) {\n\n            let slot = occupiedSlots[i];\n\n            for (let j = 0, jLen = mobs.length; j < jLen; j++) {\n\n                let mob = mobs[j];\n\n                if (mob.position.x === slot.position.x && mob.position.y === slot.position.y) {\n\n                    let targetMob = mobs[slot.mob];\n\n                    targetMob.bodyParts.length = j;\n                    targetMob.length = j + 1;\n\n                    mob.addBodyPart();\n\n                    if (targetMob.length < targetMob.minLength) {\n                        deadMobs.push(slot.mob);\n                    }\n\n                }\n\n            }\n        }\n\n        // sort decending\n        deadMobs = deadMobs.sort(function (a, b) {\n            return b - a;\n        });\n\n        for (let i = 0, len = deadMobs.length; i < len; i++) {\n\n            //console.log('Killed', mobs[deadMobs[i]]);\n            mobs.splice(deadMobs[i], 1);\n\n            if (mobs.length === 1) {\n                this.finished = mobs[0];\n            }\n        }\n\n    }\n\n}\n\nexport default levels;\n","import dom from '../modules/dom';\n\nvar _private = {};\n\nclass loop {\n\n    constructor(scope = this, frameTime = (1000 / 60), update = null, draw = null) {\n        _private.frameTime = frameTime;\n        _private.pause = true;\n        _private.update = update.bind(scope);\n        _private.draw = draw.bind(scope);\n    }\n\n    start() {\n        _private.pause = false;\n        _private.startTime = new Date().getTime();\n        _private.timeSinceLastUpdate = 0;\n\n        this.tick(0);\n    }\n\n    stop() {\n        _private.pause = true;\n    }\n\n    isRunning() {\n        return _private.pause;\n    }\n\n    tick(timestamp) {\n\n        if (_private.pause) {\n            return;\n        }\n\n        var timePassed = new Date().getTime() - _private.startTime,\n            delta = timestamp - timePassed;\n\n        _private.timeSinceLastUpdate += delta;\n\n        if (_private.timeSinceLastUpdate > _private.frameTime) {\n            if (_private.update !== null) {\n                _private.update(_private.timeSinceLastUpdate);\n            }\n            _private.timeSinceLastUpdate = 0;\n        }\n\n        if (_private.draw !== null) {\n            _private.draw();\n        }\n\n        dom.requestAnimationFrame(this.tick, this);\n    }\n\n}\n\nexport default loop;\n","class map {\n\n    constructor(options) {\n\n        this.width = options.width;\n        this.height = options.height;\n        this.data = options.data;\n    }\n\n    getCoordinatesForKey(key) {\n\n        return {\n            x: (key === 0) ? 0 : Math.floor(key / this.width),\n            y: (key === 0) ? 0 : key % this.width\n        };\n    }\n\n    getKeyForCoordinates(coordinates) {\n        return (coordinates.y * this.width) + coordinates.x;\n    }\n\n    isKeyValid(key) {\n        return (key > 0) && (key <= this.data.length);\n    }\n\n    isCoordinatesValid(coordinates) {\n\n        var isXValid = (coordinates.x >= 0 && coordinates.x < this.width),\n            isYValid = (coordinates.y >= 0 && coordinates.y < this.height);\n\n        return isXValid && isYValid;\n    }\n\n}\n\nexport default map;\n","\nclass mob {\n\n    constructor(name, position, direction, color = Math.floor(Math.random(360))) {\n\n        this.name = name;\n        this.length = 5;\n        this.minLength = 3;\n\n        this.color = color;\n\n        this.position = {\n            x: position.x || 0,\n            y: position.y || 0\n        };\n\n        this.direction = {\n            x: direction.x || 0,\n            y: direction.y || 0\n        };\n\n        this.rotation = 0;\n\n        this.bodyParts = [];\n\n        for (let i = 0, len = this.length -1; i < len; i++) {\n            this.addBodyPart();\n        }\n\n    }\n\n    addBodyPart() {\n\n        var position;\n\n        if (this.bodyParts.length === 0) {\n            position = {\n                x: this.position.x,\n                y: this.position.y\n            };\n        } else {\n            let part = this.bodyParts[this.bodyParts.length - 1];\n\n            position = {\n                x: part.x,\n                y: part.y\n            };\n        }\n\n        this.bodyParts.push(position);\n    }\n\n    setPosition(position) {\n\n        var startPosition = {\n            x: this.position.x,\n            y: this.position.y\n        };\n\n        this.position.x = position.x;\n        this.position.y = position.y;\n\n        this.updateBodyParts(startPosition);\n    }\n\n    setDirection(direction) {\n\n        if (typeof direction === 'object') {\n            this.direction.x = direction.x;\n            this.direction.y = direction.y;\n        } else if (typeof direction === 'string') {\n\n            let x = 0,\n                y = 0,\n                pi180 = Math.PI / 180;\n\n            switch (direction) {\n                case 'right':\n                    x = 1;\n                    y = 0;\n                    this.rotation = 180 * pi180;\n                    break;\n                case 'left':\n                    x = -1;\n                    y = 0;\n                    this.rotation = 0;\n                    break;\n                case 'up':\n                    x = 0;\n                    y = -1;\n                    this.rotation = 90 * pi180;\n                    break;\n                case 'down':\n                    x = 0;\n                    y = 1;\n                    this.rotation = 270 * pi180;\n                    break;\n            }\n\n            this.direction.x = x;\n            this.direction.y = y;\n        }\n\n    }\n\n    getDirection(asString = false) {\n\n        if (asString) {\n            return this.getDirectionAsString();\n        } else {\n            return this.direction;\n        }\n    }\n\n    getDirectionAsString() {\n\n        var direction;\n\n        if (this.direction.x === 1) {\n            direction = 'right';\n        } else if (this.direction.x === -1) {\n            direction = 'left';\n        } else if (this.direction.y === 1) {\n            direction = 'down';\n        } else if (this.direction.y === -1) {\n            direction = 'up';\n        }\n\n        return direction;\n    }\n\n    rotate(clockwise = true) {\n\n        if (clockwise) {\n            switch (this.getDirection(true)) {\n                case 'left':\n                    this.setDirection('up');\n                    break;\n                case 'right':\n                    this.setDirection('down');\n                    break;\n                case 'up':\n                    this.setDirection('right');\n                    break;\n                case 'down':\n                    this.setDirection('left');\n                    break;\n            }\n        } else {\n            this.rotate();\n            this.rotate();\n            this.rotate();\n        }\n\n    }\n\n    getNextPosition() {\n\n        return {\n            x: this.position.x + this.direction.x,\n            y: this.position.y + this.direction.y\n        };\n    }\n\n    updateBodyParts(position) {\n\n        var lastPart = {\n            x: position.x,\n            y: position.y\n        };\n\n        for (let i = 0, len = this.bodyParts.length; i < len; i++) {\n\n            let part = this.bodyParts[i];\n\n            if (part.x !== lastPart.x || part.y !== lastPart.y) {\n\n                let thisPart = {\n                    x: this.bodyParts[i].x,\n                    y: this.bodyParts[i].y\n                };\n\n                this.bodyParts[i].x = lastPart.x;\n                this.bodyParts[i].y = lastPart.y;\n\n                lastPart.x = thisPart.x;\n                lastPart.y = thisPart.y;\n\n            }\n        }\n\n        //console.log('parts [x:%d y: %d] [x:%d, y:%d]',\n            //this.bodyParts[0].x,\n            //this.bodyParts[0].y,\n            //this.bodyParts[1].x,\n            //this.bodyParts[1].y\n        //);\n\n    }\n\n}\n\nexport default mob;\n","var _window = window,\n    _document = _window.document,\n    dom = {};\n\ndom.createElement = function (type) {\n    return _document.createElement(type);\n};\n\ndom.load = function (callback) {\n    _window.onload = callback;\n};\n\ndom.add = function (element, selector) {\n    _document.querySelector(selector).appendChild(element);\n};\n\ndom.requestAnimationFrame = function (callback, scope) {\n    _window.requestAnimationFrame(callback.bind(scope));\n};\n\ndom.eventListener = function (scope, add, type, callback) {\n    if (add === true) {\n        _window.addEventListener(type, callback.bind(scope), false);\n    } else {\n        _window.removeEventListener(type);\n    }\n};\n\ndom.setTimeout = function (callback, delay) {\n    _window.setTimeout(() => {\n        callback();\n    }, delay);\n};\n\ndom.saveStorage = function (key, value) {\n\n    _window.localStorage.setItem(key, JSON.stringify(value));\n};\n\ndom.loadStorage = function (key) {\n    let item = _window.localStorage.getItem(key);\n\n    return JSON.parse(item);\n};\n\ndom.setStyles = function () {\n\n    var body = _document.querySelector('body');\n\n    body.style.backgroundColor = 'hsl(90, 40%, 40%)';\n    body.style.textAlign = 'center';\n\n};\n\ndom.reload = function () {\n    _window.location.reload();\n};\n\nexport default dom;\n","import dom from './dom';\n\nclass io {\n\n    constructor() {\n        this.bindKeyboard();\n        this.activeKeys = [];\n    }\n\n    bindKeyboard() {\n        dom.eventListener(this, true, 'keydown', this.keyPressed);\n        dom.eventListener(this, true, 'keyup', this.keyReleased);\n    }\n\n    keyPressed(event) {\n\n        if (this.activeKeys.indexOf(event.keyCode) === -1) {\n            this.activeKeys.push(event.keyCode);\n        }\n\n    }\n\n    keyReleased(event) {\n\n        var i = this.activeKeys.indexOf(event.keyCode);\n\n        if (i !== -1) {\n            this.activeKeys.splice(i, 1);\n        }\n    }\n\n    getDirection() {\n\n        var left = (this.activeKeys.indexOf(37) !== -1) ? -1 : 0,\n            right = (this.activeKeys.indexOf(39) !== -1) ? 1 : 0,\n            up = (this.activeKeys.indexOf(38) !== -1) ? -1 : 0,\n            down = (this.activeKeys.indexOf(40) !== -1) ? 1 : 0;\n\n        return {\n            x: left + right,\n            y: up + down\n        };\n    }\n\n    isKeyPressed() {\n        return (this.activeKeys.length > 0);\n    }\n\n}\n\nexport default new io();\n","import ajax from 'simple-ajax';\nimport dom from './dom';\n\nclass loader {\n\n    constructor() {\n\n        this.loaded = false;\n        this.filesLoaded = 0;\n        this.filesToLoad = 0;\n        this.onLoadedCallback = null;\n    }\n\n    progress() {\n\n        if (this.filesToLoad === 0) {\n            this.loaded = true;\n            return 1;\n        } else if (this.filesLoaded === 0) {\n            return 0;\n        } else {\n            return this.filesLoaded / this.filesToLoad;\n        }\n\n    }\n\n    loadAjax(path, callback) {\n\n        this.loaded = false;\n        this.filesToLoad++;\n\n        new ajax(path)\n            .on('success', (event, data) => {\n                callback('success', data);\n            })\n            .on('error', (event, message) => {\n                callback('error', message);\n            })\n            .on('complete', () => {\n                this.filesLoaded++;\n\n                if (this.progress() === 1 && this.onLoadedCallback) {\n                    this.onLoadedCallback();\n                }\n            })\n            .send();\n    }\n\n    loadImg(path, callback) {\n\n        this.loaded = false;\n        this.filesToLoad++;\n\n        var img = new Image();\n\n        img.onload = () => {\n            this.filesLoaded++;\n\n            if (this.progress() === 1 && this.onLoadedCallback) {\n                this.onLoadedCallback();\n            }\n\n            if (typeof callback === 'function') {\n                callback();\n            }\n        };\n        img.src = path;\n\n        return img;\n\n    }\n\n    onLoaded(scope, callback) {\n        this.onLoadedCallback = callback.bind(scope);\n    }\n\n}\n\nexport default new loader();\n","import settings from '../settings.json';\nimport loader from './loader';\n\nclass render {\n\n    constructor() {\n\n        this.scale = [1, 1];\n        this.tileset = loader.loadImg('img/tileset.png');\n    }\n\n    setDimentions(width, height) {\n        this.width = width;\n        this.height = height;\n        this.tileSize = 32;\n    }\n\n    setScale(tilesX, tilesY) {\n\n        var maxTileWidth = this.width / tilesX,\n            maxTileHeight = this.height / tilesY;\n\n        this.tileSize = (maxTileWidth > maxTileHeight) ? maxTileHeight : maxTileWidth;\n\n        this.tileSize = Math.floor(this.tileSize);\n\n    }\n\n    drawTile(ctx, x, y, type = 0) {\n\n        var size = 64,\n            sx = size * type,\n            sy = 0,\n            sw = size,\n            sh = size,\n            dx = x,\n            dy = y,\n            dw = this.tileSize,\n            dh = this.tileSize;\n\n        ctx.drawImage(this.tileset, sx, sy, sw, sh, dx, dy, dw, dh);\n    }\n\n    drawLoader(ctx, progress) {\n\n        this.clearLoader(ctx);\n\n        ctx.fillStyle = 'hsl(270, 50%, 60%)';\n        ctx.strokeStyle = 'hsl(270, 50%, 60%)';\n        ctx.save();\n        ctx.translate(this.width * 0.5, this.height * 0.5);\n        ctx.strokeRect(-50, -5, 100, 10);\n        ctx.fillRect(-50, -5, Math.floor(progress * 100), 10);\n        ctx.restore();\n\n    }\n\n    clearLoader(ctx) {\n\n        ctx.save();\n        ctx.translate(this.width * 0.5, this.height * 0.5);\n        ctx.clearRect(-51, -6, 102, 12);\n        ctx.restore();\n    }\n\n    drawMap(ctx, map) {\n\n        this.setScale(map.width, map.height);\n\n        var x = 0,\n            y = 0;\n\n        for (let i = 0, len = map.data.length; i < len; i++) {\n\n            switch (map.data[i]) {\n                case 'X':\n                      //this.drawTile(ctx, x, y, 0);\n                      break;\n                case 'c':\n                      this.drawTile(ctx, x, y, 4);\n                      break;\n                case 'o':\n                      this.drawTile(ctx, x, y, 1);\n                      break;\n                default:\n                      this.drawTile(ctx, x, y, 0);\n            }\n\n            if (i % map.width === map.width - 1) {\n                x = 0;\n                y += this.tileSize;\n            } else {\n                x += this.tileSize;\n            }\n        }\n\n    }\n\n    drawMobs(ctx, mobs, map) {\n\n        this.setScale(map.width, map.height);\n\n\n        var mobSize = this.tileSize * 0.7,\n            padding = (this.tileSize - mobSize) * 0.5;\n\n        // draw each mob\n        for (let i = 0, len = mobs.length; i < len; i++) {\n\n            let mob = mobs[i],\n                lastX = mob.position.x,\n                lastY = mob.position.y;\n\n            // draw head\n            ctx.save();\n            ctx.translate(\n                mob.position.x * this.tileSize + (this.tileSize * 0.5),\n                mob.position.y * this.tileSize + (this.tileSize * 0.5)\n            );\n            ctx.rotate(mob.rotation);\n            ctx.translate(-(this.tileSize * 0.5), -(this.tileSize * 0.5));\n            ctx.fillStyle = 'hsl(' + mob.color + ', 50%, 60%)';\n            ctx.fillRect(padding, padding, mobSize, mobSize);\n            this.drawTile(ctx, 0, 0, 2);\n            ctx.restore();\n\n            // draw each body part\n            for (let j = 0, jLen = mob.bodyParts.length; j < jLen; j++) {\n\n                let part = mob.bodyParts[j];\n                let last = (j + 1 === jLen) ? true : false;\n\n                if (lastX === part.x && lastY === part.y) {\n                    break;\n                }\n\n                ctx.save();\n                ctx.translate(part.x * this.tileSize, part.y * this.tileSize);\n                if (last) {\n                    ctx.fillStyle = 'hsl(' + this.addColorValue(mob.color, 40) + ', 50%, 60%)';\n                } else {\n                    ctx.fillStyle = 'hsl(' + this.addColorValue(mob.color, 20) + ', 50%, 60%)';\n                }\n                ctx.fillRect(padding, padding, mobSize, mobSize);\n                this.drawTile(ctx, 0, 0, 3);\n                ctx.restore();\n\n                lastX = part.x;\n                lastY = part.y;\n\n            }\n\n        }\n\n    }\n\n    addColorValue(original, difference) {\n\n        var newValue = original + difference;\n\n        if (newValue > 360) {\n            newValue -= 360;\n        }\n\n        return newValue;\n    }\n\n    drawCountdown(ctx, number) {\n      ctx.fillStyle = 'hsl(0, 30%, 90%)';\n      ctx.font = '100px Georgia';\n      ctx.textAlign = 'center';\n      ctx.fillText(number, settings.width * 0.5, settings.height * 0.5);\n    }\n\n    drawInstructions(ctx) {\n        ctx.fillStyle = 'hsl(0, 30%, 90%)';\n        ctx.font = '30px Georgia';\n        ctx.textAlign = 'center';\n\n        ctx.save();\n        ctx.translate(settings.width * 0.5, settings.height * 0.5);\n        ctx.fillText('Pick a snake to win', 0, -70);\n        ctx.font = '35px Georgia';\n        ctx.fillText('Press any key to open and close the gates', 0, 0);\n        ctx.font = '30px Georgia';\n        ctx.fillText('The last snake alive wins', 0, 70);\n        ctx.restore();\n\n        ctx.font = '15px Georgia';\n        ctx.fillText('The game will start within 5 seconds', settings.width * 0.5, settings.height - 30);\n    }\n\n    drawEnd(ctx, mob) {\n\n        var mobSize = this.tileSize * 0.7,\n            padding = (this.tileSize - mobSize) * 0.5;\n\n        ctx.fillStyle = 'hsl(0, 30%, 90%)';\n        ctx.font = '30px Georgia';\n        ctx.textAlign = 'center';\n\n        ctx.save();\n        ctx.translate(settings.width * 0.5, settings.height * 0.5);\n        ctx.fillText('The winner is:', 0, -30);\n        ctx.font = '40px Georgia';\n        ctx.fillText(mob.name, 0, 20);\n        ctx.restore();\n\n        ctx.font = '15px Georgia';\n        ctx.fillText('The game will restart automatically', settings.width * 0.5, settings.height - 30);\n\n        ctx.save();\n        ctx.translate((settings.width - this.tileSize) * 0.5, (settings.height * 0.5) + 40);\n        ctx.fillStyle = 'hsl(' + mob.color + ', 50%, 60%)';\n        ctx.fillRect(padding, padding, mobSize, mobSize);\n        this.drawTile(ctx, 0, 0, 2);\n        ctx.restore();\n\n    }\n}\n\nexport default new render();\n","module.exports={\n    \"width\": \"800\",\n    \"height\": \"600\",\n    \"mobs\": [\n        {\n            \"name\": \"Rose\",\n            \"color\": \"0\"\n        },\n        {\n            \"name\": \"Emerald\",\n            \"color\": \"90\"\n        },\n        {\n            \"name\": \"Azura\",\n            \"color\": \"180\"\n        },\n        {\n            \"name\": \"Viola\",\n            \"color\": \"270\"\n        }\n    ]\n}\n"],"sourceRoot":"/source/"}